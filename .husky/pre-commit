#!/usr/bin/env sh

echo "ğŸ” YalÄ±han BekÃ§i - Pre-commit kontrolleri baÅŸlÄ±yor..."
echo ""

# Lint-staged Ã§alÄ±ÅŸtÄ±r (deÄŸiÅŸen dosyalarÄ± kontrol et)
npx lint-staged

# jQuery taramasÄ±
echo ""
echo "ğŸ” jQuery taramasÄ±..."
npm run scan:jquery || {
    echo "âŒ jQuery kullanÄ±mÄ± bulundu! LÃ¼tfen modernize edin (fetch/AbortController)."
    exit 1
}

# Context7 compliance kontrolÃ¼
echo ""
echo "ğŸ“‹ Context7 kontrolÃ¼..."
php artisan standard:check --type=context7 || {
    echo "âŒ Context7 ihlali bulundu! LÃ¼tfen dÃ¼zeltin."
    echo "ğŸ’¡ Detay iÃ§in: php artisan standard:check --type=context7"
    exit 1
}

echo ""
echo "âœ… TÃ¼m kontroller baÅŸarÄ±lÄ±! Commit ediliyor..."
