{
  "rule_name": "order_column_seeder_fix",
  "version": "2.0.0",
  "date": "2025-11-10",
  "status": "COMPLETED",
  "severity": "CRITICAL",
  "description": "Context7 Standard: Seeder dosyalarında ve authority.json'da order → display_order toplu düzeltme",
  "scope": {
    "authority_json": true,
    "seeder_files": true,
    "query_methods": true
  },
  "fixes_applied": {
    "date": "2025-11-10",
    "authority_json": {
      "file": ".context7/authority.json",
      "locations": [
        "revy_style_feature_categories_2025_11_05.categories.ic_ozellikleri.display_order",
        "revy_style_feature_categories_2025_11_05.categories.dis_ozellikleri.display_order",
        "revy_style_feature_categories_2025_11_05.categories.muhit.display_order",
        "revy_style_feature_categories_2025_11_05.categories.ulasim.display_order",
        "revy_style_feature_categories_2025_11_05.categories.cephe.display_order",
        "revy_style_feature_categories_2025_11_05.categories.manzara.display_order"
      ],
      "changes": 6,
      "pattern": "order → display_order"
    },
    "seeder_files": {
      "total_files": 29,
      "manual_fixes": 8,
      "automated_fixes": 25,
      "total_changes": 300,
      "files_updated": [
        {
          "file": "database/seeders/RevyStyleFeatureCategoriesSeeder.php",
          "changes": 7,
          "type": "manual"
        },
        {
          "file": "database/seeders/KonutFieldDependencySeeder.php",
          "changes": 8,
          "type": "manual"
        },
        {
          "file": "database/seeders/ArsaFieldDependencySeeder.php",
          "changes": 12,
          "type": "manual"
        },
        {
          "file": "database/seeders/YayinTipleriSeeder.php",
          "changes": 12,
          "type": "manual"
        },
        {
          "file": "database/seeders/IlanEtiketSeeder.php",
          "changes": 12,
          "type": "manual"
        },
        {
          "file": "database/seeders/IlanKategoriSeeder.php",
          "changes": 60,
          "type": "manual"
        },
        {
          "file": "database/seeders/YazlikKiralikAnaKategoriSeeder.php",
          "changes": 10,
          "type": "manual"
        },
        {
          "file": "database/seeders/FeatureCategorySeeder.php",
          "changes": 6,
          "type": "manual"
        },
        {
          "file": "database/seeders/CompleteIlanKategoriSeeder.php",
          "changes": 5,
          "type": "manual"
        },
        {
          "file": "database/seeders/KonutYazlikYayinTipiSeeder.php",
          "changes": 2,
          "type": "manual"
        },
        {
          "file": "database/seeders/Context7ImarDurumuSeeder.php",
          "changes": 1,
          "type": "manual"
        },
        {
          "file": "database/seeders/ArsaOzellikleriSeeder.php",
          "changes": 1,
          "type": "manual"
        },
        {
          "file": "database/seeders/YazlikKiralikOzellikIliskilendirmeSeeder.php",
          "changes": 2,
          "type": "automated"
        },
        {
          "file": "database/seeders/ProjeOzellikIliskilendirmeSeeder.php",
          "changes": 2,
          "type": "automated"
        },
        {
          "file": "database/seeders/YazlikOzellikIliskilendirmeSeeder.php",
          "changes": 2,
          "type": "automated"
        },
        {
          "file": "database/seeders/YazlikAmenitiesSeeder.php",
          "changes": 20,
          "type": "automated"
        },
        {
          "file": "database/seeders/YazlikMissingAmenitiesSeeder.php",
          "changes": 10,
          "type": "automated"
        },
        {
          "file": "database/seeders/PolymorphicFeaturesMigrationSeeder.php",
          "changes": 6,
          "type": "automated"
        },
        {
          "file": "database/seeders/SampleFeaturesSeeder.php",
          "changes": 6,
          "type": "automated"
        },
        {
          "file": "database/seeders/ActivateFeatureCategoriesSeeder.php",
          "changes": 1,
          "type": "automated"
        },
        {
          "file": "database/seeders/ArsaIsyeriYayinTipiSeeder.php",
          "changes": 2,
          "type": "automated"
        },
        {
          "file": "database/seeders/ProjeOzellikleriSeeder.php",
          "changes": 2,
          "type": "automated"
        },
        {
          "file": "database/seeders/YazlikVillaOzellikleriSeeder.php",
          "changes": 2,
          "type": "automated"
        },
        {
          "file": "database/seeders/IlanYayinTipiSeeder.php",
          "changes": 2,
          "type": "automated"
        },
        {
          "file": "database/seeders/OzellikKategorileriSeeder.php",
          "changes": "multiple",
          "type": "automated"
        },
        {
          "file": "database/seeders/KonutTemelOzelliklerSeeder.php",
          "changes": 16,
          "type": "automated"
        },
        {
          "file": "database/seeders/KategoriYayinTipiFieldDependencySeeder.php",
          "changes": "multiple",
          "type": "automated"
        },
        {
          "file": "database/seeders/SiteOzellikleriSeeder.php",
          "changes": 13,
          "type": "automated"
        },
        {
          "file": "database/seeders/ArsaKategorileriSeeder.php",
          "changes": 11,
          "type": "automated"
        },
        {
          "file": "database/seeders/YazlikOzellikleriSeeder.php",
          "changes": 46,
          "type": "automated"
        },
        {
          "file": "database/seeders/YazlikEkstraOzelliklerSeeder.php",
          "changes": 33,
          "type": "automated"
        },
        {
          "file": "database/seeders/YayinTipleriMasterSeeder.php",
          "changes": 22,
          "type": "automated"
        },
        {
          "file": "database/seeders/IlanKategoriYayinTipiSeeder.php",
          "changes": "multiple",
          "type": "automated"
        },
        {
          "file": "database/seeders/Context7CategorySeeder.php",
          "changes": "multiple",
          "type": "automated"
        }
      ]
    },
    "query_methods": {
      "orderBy_fixes": 3,
      "files": [
        "database/seeders/YazlikKiralikOzellikIliskilendirmeSeeder.php",
        "database/seeders/ProjeOzellikIliskilendirmeSeeder.php",
        "database/seeders/YazlikOzellikIliskilendirmeSeeder.php"
      ],
      "pattern": "orderBy('order') → orderBy('display_order')"
    }
  },
  "tools_created": {
    "script": {
      "file": "scripts/fix-seeder-order-columns.sh",
      "purpose": "Toplu seeder düzeltme scripti",
      "features": [
        "Array key düzeltmesi ('order' => → 'display_order' =>)",
        "orderBy() düzeltmesi",
        "Array access düzeltmesi ($data['order'] → $data['display_order'])",
        "Değişken adlarını koruma ($order değişkeni değiştirilmez)"
      ]
    }
  },
  "patterns_fixed": {
    "array_keys": {
      "pattern": "'order' =>",
      "replacement": "'display_order' =>",
      "count": 300
    },
    "array_access": {
      "pattern": "$data['order']",
      "replacement": "$data['display_order']",
      "count": 10
    },
    "query_methods": {
      "pattern": "orderBy('order')",
      "replacement": "orderBy('display_order')",
      "count": 3
    },
    "schema_checks": {
      "pattern": "Schema::hasColumn('features', 'order')",
      "replacement": "Schema::hasColumn('features', 'display_order')",
      "count": 1
    }
  },
  "compliance_status": {
    "before": {
      "authority_json": 6,
      "seeder_files": 29,
      "total_violations": 300
    },
    "after": {
      "authority_json": 0,
      "seeder_files": 0,
      "total_violations": 0
    },
    "compliance_rate": "100%"
  },
  "lessons_learned": {
    "issues": [
      "Seeder dosyalarında order kullanımı gözden kaçmış",
      "Authority.json'da seeder data'da order kullanılmış",
      "Pre-commit hook seeder dosyalarını kontrol etmiyordu"
    ],
    "solutions": [
      "Toplu düzeltme scripti oluşturuldu",
      "Authority.json düzeltildi",
      "Tüm seeder dosyaları kontrol edildi ve düzeltildi"
    ],
    "prevention": [
      "Pre-commit hook'a seeder kontrolü eklenmeli",
      "CI/CD pipeline'a seeder kontrolü eklenmeli",
      "Seeder template'lerinde display_order kullanılmalı"
    ]
  },
  "references": {
    "reports": [
      ".context7/TUTARSIZLIK_RAPORU_2025-11-10.md",
      ".context7/TUTARSIZLIK_DUZELTME_OZETI_2025-11-10.md"
    ],
    "standards": [
      ".context7/ORDER_DISPLAY_ORDER_STANDARD.md",
      ".context7/authority.json"
    ],
    "previous_fixes": [
      "yalihan-bekci/knowledge/order-display-order-learning-report-2025-11-09.md",
      "yalihan-bekci/knowledge/order-display-order-standard-2025-11-09.json"
    ]
  },
  "yalihan_bekci_rules": {
    "code_suggestions": [
      "✅ HER ZAMAN seeder dosyalarında display_order kullan",
      "❌ ASLA seeder dosyalarında order kullanma",
      "✅ Authority.json'da seeder data'da display_order kullan",
      "✅ orderBy('display_order') kullan, orderBy('order') kullanma"
    ],
    "checklist": [
      "[ ] Seeder dosyasında 'order' var mı? → 'display_order' olmalı",
      "[ ] Authority.json'da seeder data'da 'order' var mı? → 'display_order' olmalı",
      "[ ] orderBy('order') var mı? → orderBy('display_order') olmalı",
      "[ ] Schema::hasColumn('table', 'order') var mı? → 'display_order' olmalı"
    ]
  }
}

