{
  "title": "Modül Entegrasyon Stratejileri",
  "version": "1.0.0",
  "date": "2025-10-20",
  "author": "AI Assistant",
  "purpose": "Yalıhan Bekçi'ye modül ilişkileri ve entegrasyon stratejilerini öğretmek",
  
  "current_modules": {
    "active": [
      {
        "name": "Auth",
        "namespace": "App\\Modules\\Auth",
        "models": ["User", "Role"],
        "controllers": ["AuthController"],
        "status": "active"
      },
      {
        "name": "Emlak",
        "namespace": "App\\Modules\\Emlak",
        "models": ["Ilan", "IlanFotografi", "IlanOzellik", "Feature", "Proje"],
        "controllers": ["IlanController", "FeatureController", "ProjeController"],
        "status": "active"
      },
      {
        "name": "Crm",
        "namespace": "App\\Modules\\Crm",
        "models": ["Musteri", "Talep", "Kisi", "Aktivite", "Randevu", "Etiket"],
        "controllers": ["MusteriController", "KisiController", "AktiviteController"],
        "status": "active"
      },
      {
        "name": "TakimYonetimi",
        "namespace": "App\\Modules\\TakimYonetimi",
        "models": ["Proje", "Gorev", "TakimUyesi", "GorevTakip", "GorevDosya"],
        "controllers": ["ProjeController", "GorevController", "TakimController"],
        "status": "active"
      },
      {
        "name": "TalepAnaliz",
        "namespace": "App\\Modules\\TalepAnaliz",
        "models": [],
        "controllers": ["TalepAnalizController"],
        "status": "active"
      },
      {
        "name": "Analitik",
        "namespace": "App\\Modules\\Analitik",
        "models": [],
        "controllers": ["DashboardController", "IstatistikController", "RaporController"],
        "status": "active"
      },
      {
        "name": "Finans",
        "namespace": "App\\Modules\\Finans",
        "models": ["FinansalIslem", "Komisyon"],
        "controllers": [],
        "status": "newly_created"
      }
    ],
    "missing": [
      {
        "name": "CRMSatis",
        "purpose": "Satış süreçleri, sözleşme yönetimi, satış raporları",
        "priority": "high"
      },
      {
        "name": "ArsaModulu",
        "purpose": "Arsa özel işlemleri, imar durumu, parsel bilgileri",
        "priority": "medium"
      },
      {
        "name": "Bildirimler",
        "purpose": "Bildirim sistemi, email/SMS/push notifications",
        "priority": "medium"
      }
    ]
  },
  
  "module_relationships": {
    "core_flow": {
      "description": "Ana modül akışı",
      "flow": [
        "Auth (User Management)",
        "Emlak (Property Management)",
        "Crm (Customer Management)",
        "TakimYonetimi (Team Management)",
        "Analitik (Analytics & Reporting)"
      ]
    },
    
    "detailed_relationships": {
      "Emlak_Crm": {
        "description": "Emlak ve CRM modülleri arası ilişkiler",
        "relationships": [
          {
            "from": "Ilan",
            "to": "Musteri",
            "type": "belongsToMany",
            "table": "musteri_ilan",
            "pivot": ["status", "notlar", "created_at"]
          },
          {
            "from": "Ilan",
            "to": "Talep",
            "type": "belongsToMany",
            "table": "ilan_talep_eslesmeler",
            "pivot": ["skor", "notlar", "status", "created_at"]
          },
          {
            "from": "Ilan",
            "to": "Aktivite",
            "type": "morphMany",
            "polymorphic": true
          }
        ]
      },
      
      "TakimYonetimi_Others": {
        "description": "Takım Yönetimi modülü diğer modüllerle ilişkileri",
        "relationships": [
          {
            "from": "Gorev",
            "to": "Ilan",
            "type": "belongsToMany",
            "table": "gorev_ilan",
            "pivot": ["gorev_tipi", "notlar", "created_at"]
          },
          {
            "from": "Gorev",
            "to": "Musteri",
            "type": "belongsTo",
            "foreign_key": "musteri_id"
          },
          {
            "from": "Gorev",
            "to": "Talep",
            "type": "belongsTo",
            "foreign_key": "talep_id"
          }
        ]
      },
      
      "Finans_Integration": {
        "description": "Finans modülü entegrasyonu",
        "relationships": [
          {
            "from": "FinansalIslem",
            "to": "Ilan",
            "type": "belongsTo",
            "foreign_key": "ilan_id"
          },
          {
            "from": "FinansalIslem",
            "to": "Musteri",
            "type": "belongsTo",
            "foreign_key": "musteri_id"
          },
          {
            "from": "FinansalIslem",
            "to": "Gorev",
            "type": "belongsTo",
            "foreign_key": "gorev_id"
          },
          {
            "from": "Komisyon",
            "to": "Ilan",
            "type": "belongsTo",
            "foreign_key": "ilan_id"
          },
          {
            "from": "Komisyon",
            "to": "Musteri",
            "type": "belongsTo",
            "foreign_key": "musteri_id"
          }
        ]
      }
    }
  },
  
  "integration_patterns": {
    "service_layer": {
      "description": "Service layer pattern kullanımı",
      "examples": [
        {
          "module": "Emlak",
          "service": "IlanService",
          "methods": [
            "createIlan",
            "updateIlan",
            "deleteIlan",
            "attachMusteri",
            "attachTalep",
            "calculateMatchingScore"
          ]
        },
        {
          "module": "Finans",
          "service": "FinansalIslemService",
          "methods": [
            "createFinansalIslem",
            "createKomisyon",
            "hesaplaIlanSatisKomisyonu",
            "onaylaFinansalIslem",
            "getFinansalIslemStats"
          ]
        }
      ]
    },
    
    "pivot_tables": {
      "description": "Many-to-many ilişkiler için pivot tablolar",
      "tables": [
        {
          "name": "musteri_ilan",
          "columns": ["musteri_id", "ilan_id", "status", "notlar", "created_at", "updated_at"],
          "purpose": "Müşteri-ilan eşleştirmesi"
        },
        {
          "name": "ilan_talep_eslesmeler",
          "columns": ["ilan_id", "talep_id", "skor", "notlar", "status", "created_at", "updated_at"],
          "purpose": "İlan-talep eşleştirmesi"
        },
        {
          "name": "gorev_ilan",
          "columns": ["gorev_id", "ilan_id", "gorev_tipi", "notlar", "created_at", "updated_at"],
          "purpose": "Görev-ilan eşleştirmesi"
        }
      ]
    },
    
    "polymorphic_relationships": {
      "description": "Polymorphic ilişkiler",
      "examples": [
        {
          "model": "Aktivite",
          "polymorphic": "aktivite_sahibi",
          "targets": ["Ilan", "Talep", "Musteri", "Gorev"],
          "purpose": "Çoklu model aktivite takibi"
        }
      ]
    }
  },
  
  "implementation_strategies": {
    "phase_1": {
      "name": "Mevcut İlişkileri Düzeltme",
      "duration": "1-2 hafta",
      "tasks": [
        "Duplicate model sorunlarını çöz",
        "Eksik relationship'leri ekle",
        "Service layer'ları oluştur",
        "Model consistency'yi sağla",
        "Database migration'ları hazırla"
      ]
    },
    
    "phase_2": {
      "name": "Eksik Modülleri Oluşturma",
      "duration": "2-3 hafta",
      "tasks": [
        "Finans modülü (tamamlandı)",
        "CRMSatis modülü",
        "ArsaModulu",
        "Bildirimler modülü",
        "Entegrasyon testleri"
      ]
    },
    
    "phase_3": {
      "name": "Entegrasyon ve Optimizasyon",
      "duration": "1-2 hafta",
      "tasks": [
        "Modül arası entegrasyon",
        "API endpoint'leri",
        "Frontend entegrasyonu",
        "Performance optimization",
        "Security audit"
      ]
    }
  },
  
  "best_practices": {
    "model_relationships": [
      "Her modül kendi namespace'inde olmalı",
      "Cross-module ilişkiler explicit olmalı",
      "Pivot tablolar açık isimlendirme kullanmalı",
      "Polymorphic ilişkiler tutarlı olmalı"
    ],
    
    "service_layer": [
      "Her modül kendi service'lerine sahip olmalı",
      "Business logic service'lerde olmalı",
      "Database transaction'lar service'lerde olmalı",
      "Cross-module işlemler service'lerde olmalı"
    ],
    
    "database_design": [
      "Foreign key constraint'ler tanımlanmalı",
      "Index'ler performans için eklenmeli",
      "Pivot tablolar minimal olmalı",
      "Soft delete'ler tutarlı kullanılmalı"
    ]
  },
  
  "common_issues": {
    "duplicate_models": {
      "description": "Aynı model birden fazla modülde tanımlanması",
      "examples": [
        "Talep modeli hem Talep hem Crm modülünde",
        "IlanTalepEslesme modeli hem Talep hem Crm modülünde"
      ],
      "solutions": [
        "Tek bir modülde tanımla",
        "Diğer modülden import et",
        "Namespace'leri düzelt"
      ]
    },
    
    "missing_relationships": {
      "description": "Modüller arası ilişkilerin eksik olması",
      "examples": [
        "Ilan → Talep relationship eksik",
        "Ilan → Aktivite relationship eksik",
        "Gorev → Ilan relationship eksik"
      ],
      "solutions": [
        "Eksik relationship'leri ekle",
        "Pivot tabloları oluştur",
        "Migration'ları hazırla"
      ]
    },
    
    "service_layer_missing": {
      "description": "Service layer'ların eksik olması",
      "examples": [
        "IlanService eksik",
        "FeatureService eksik",
        "ProjeService eksik"
      ],
      "solutions": [
        "Service class'ları oluştur",
        "Business logic'i service'lere taşı",
        "Cross-module işlemleri service'lerde yap"
      ]
    }
  },
  
  "success_metrics": {
    "technical": {
      "code_duplication": "-80%",
      "test_coverage": "+90%",
      "performance": "+50%",
      "security_score": "+95%"
    },
    
    "business": {
      "user_satisfaction": "+40%",
      "process_efficiency": "+60%",
      "data_accuracy": "+95%",
      "report_generation": "+80%"
    }
  },
  
  "learning_outcomes": {
    "module_understanding": [
      "Modül yapısını anlama",
      "Namespace organizasyonu",
      "Service layer pattern",
      "Cross-module ilişkiler"
    ],
    
    "integration_strategies": [
      "Pivot table tasarımı",
      "Polymorphic relationships",
      "Service layer entegrasyonu",
      "API endpoint tasarımı"
    ],
    
    "problem_solving": [
      "Duplicate model çözümü",
      "Missing relationship tespiti",
      "Service layer eksiklikleri",
      "Performance optimization"
    ]
  }
}
