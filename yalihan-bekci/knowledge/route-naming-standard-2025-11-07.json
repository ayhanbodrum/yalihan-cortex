{
  "title": "Route Naming Standard - Ã‡ift Prefix YasaÄŸÄ±",
  "date": "2025-11-07",
  "category": "route_naming",
  "severity": "CRITICAL",
  "status": "active",
  "auto_fix": false,
  
  "rule": {
    "id": "CONTEXT7-ROUTE-NAMING-001",
    "name": "Double Prefix Forbidden - Route Naming Standard",
    "description": "Nested route groups'da parent prefix'i tekrar etme YASAK! Ã‡ift prefix oluÅŸur ve route bulunamaz hatasÄ± verir.",
    "enforcement": "automatic",
    "blocking": true
  },

  "problem": {
    "error": "Route [admin.crm.dashboard] not defined",
    "root_cause": "Ã‡ift prefix: admin.admin.crm.dashboard oluÅŸuyordu",
    "location": "routes/admin.php line 771",
    "date": "2025-11-07"
  },

  "forbidden_pattern": {
    "pattern": "->name('admin.admin.|->name('parent.parent.",
    "example_wrong": "Route::prefix('admin')->name('admin.')->group(function () {\n    Route::prefix('crm')->name('admin.crm.')->group(function () {\n        // SonuÃ§: admin.admin.crm.* âŒ\n    });\n});",
    "example_correct": "Route::prefix('admin')->name('admin.')->group(function () {\n    Route::prefix('crm')->name('crm.')->group(function () {\n        // SonuÃ§: admin.crm.* âœ…\n    });\n});",
    "severity": "CRITICAL"
  },

  "required_pattern": {
    "rule": "Nested groups should NOT repeat parent prefix",
    "pattern": "Parent: name('parent.') â†’ Child: name('child.') â†’ Result: parent.child.*",
    "examples": [
      {
        "context": "Admin routes",
        "code": "Route::prefix('admin')->name('admin.')->group(function () {\n    Route::prefix('crm')->name('crm.')->group(function () {\n        Route::get('/', ...)->name('dashboard');\n        // SonuÃ§: admin.crm.dashboard âœ…\n    });\n});"
      },
      {
        "context": "API routes",
        "code": "Route::prefix('api')->name('api.')->group(function () {\n    Route::prefix('admin')->name('admin.')->group(function () {\n        Route::get('/users', ...)->name('users.index');\n        // SonuÃ§: api.admin.users.index âœ…\n    });\n});"
      }
    ]
  },

  "view_usage": {
    "required": true,
    "pattern": "@if (Route::has('route.name'))",
    "example": "@if (Route::has('admin.crm.dashboard'))\n    <a href=\"{{ route('admin.crm.dashboard') }}\">\n@endif",
    "reason": "Route yoksa hata oluÅŸur, kontrol zorunlu",
    "severity": "HIGH"
  },

  "enforcement": {
    "pre_commit_hook": {
      "location": ".git/hooks/pre-commit",
      "section": "5ï¸âƒ£.7",
      "check": "grep for ->name('admin.admin.|->name('[a-z]*\\.[a-z]*\\.[a-z]*\\.",
      "action": "BLOCK commit if found",
      "status": "active"
    },
    "ci_cd_pipeline": {
      "location": ".github/workflows/context7-compliance.yml",
      "check": "grep for ->name('admin\\.admin\\.",
      "action": "FAIL build if found",
      "status": "active"
    },
    "documentation": {
      "location": ".context7/ROUTE_NAMING_STANDARD.md",
      "status": "complete"
    }
  },

  "verification": {
    "commands": [
      {
        "command": "grep -r \"->name('admin\\.admin\\.\" routes/",
        "expected": "0 matches",
        "current": "0 matches âœ…"
      },
      {
        "command": "php artisan route:list --name=admin.crm",
        "expected": "admin.crm.* routes listed",
        "current": "âœ… Working"
      }
    ],
    "compliance_level": "100%",
    "last_check": "2025-11-07"
  },

  "lessons_learned": [
    "Ã‡ift prefix hatasÄ± route bulunamaz hatasÄ±na yol aÃ§Ä±yor",
    "Nested groups'da parent prefix'i tekrar etmemek gerekiyor",
    "View'larda Route::has() kontrolÃ¼ zorunlu",
    "Pre-commit hook ile otomatik kontrol edilmeli"
  ],

  "prevention": {
    "pre_commit_hook": "âœ… ACTIVE - Blocks double prefix",
    "ci_cd_pipeline": "âœ… ACTIVE - Fails build on violation",
    "documentation": "âœ… COMPLETE - Standard documented",
    "template": "â³ PENDING - Route template to be created"
  },

  "related_documents": [
    ".context7/ROUTE_NAMING_STANDARD.md",
    ".context7/PERMANENT_STANDARDS.md",
    "yalihan-bekci/reports/route-error-root-cause-analysis-2025-11-07.md"
  ],

  "yalihan_bekci_notes": [
    "âœ… Route naming standardÄ± eklendi - Ã‡ift prefix YASAK",
    "âœ… Pre-commit hook kontrolÃ¼ aktif",
    "âœ… CI/CD validation aktif",
    "âœ… View'da Route::has() kontrolÃ¼ Ã¶neriliyor",
    "ğŸ“Š Compliance: %100 (double prefix: 0)"
  ]
}

