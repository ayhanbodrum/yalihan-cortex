# Cursor Rules - YalÄ±han Emlak Context7 Standards

## ğŸ¨ TAILWIND CSS - MASTER CSS FRAMEWORK

**CRITICAL RULE:** Tailwind CSS is the **ONLY** CSS framework allowed in this project.

### âœ… REQUIRED:

- **ALL styling must use Tailwind utility classes**
- Tailwind plugins for extended functionality
- `@apply` directive in CSS files (only in `@layer base`)
- Tailwind config customization (`tailwind.config.js`)

### âŒ FORBIDDEN:

- Bootstrap (`btn-`, `card-`, `form-control`)
- Neo Design System (`neo-btn`, `neo-card`, `neo-input`, `neo-*`)
- Foundation, Bulma, Material UI
- Custom CSS classes that duplicate Tailwind functionality
- Global CSS rules that override Tailwind utilities
- `!important` in global CSS (except browser native controls: `select`/`option`)

### ğŸ¯ Examples:

**âœ… CORRECT:**

```html
<button
    class="px-4 py-2.5 bg-blue-600 text-white rounded-lg
               hover:bg-blue-700 hover:scale-105
               active:scale-95
               focus:ring-2 focus:ring-blue-500
               transition-all duration-200
               shadow-md hover:shadow-lg"
>
    Kaydet
</button>
```

**âŒ WRONG:**

```html
<button class="neo-btn neo-btn-primary">Kaydet</button>
<button class="btn btn-primary">Kaydet</button>
```

### ğŸ“š Documentation:

- `.context7/TAILWIND-TRANSITION-RULE.md`
- `.context7/authority.json` â†’ `master_css_framework`

---

## ğŸš« FORBIDDEN PATTERNS

### Database Fields:

- `durum` â†’ `status`
- `is_active` â†’ `status`
- `aktif` â†’ `status`
- `sehir` / `sehir_id` â†’ `il` / `il_id`
- `ad_soyad` â†’ `tam_ad` (display only)
- `full_name` â†’ `name`

### CSS Classes:

- `neo-*` â†’ Tailwind utility classes
- `btn-*` â†’ Tailwind utility classes
- `card-*` â†’ Tailwind utility classes
- `form-control` â†’ Tailwind utility classes

### Layouts:

- `@extends('layouts.app')` â†’ `@extends('admin.layouts.neo')`

### Routes:

- `route('crm.*')` â†’ `route('admin.*')`

---

## âœ… REQUIRED STANDARDS

### 1. Transition/Animation (MANDATORY):

```html
<!-- ALWAYS add transitions -->
transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-lg active:scale-95
```

### 2. Dark Mode (MANDATORY):

```html
<!-- EVERY element must have dark mode variant -->
bg-white dark:bg-gray-800 text-gray-900 dark:text-white border-gray-200 dark:border-gray-700
```

### 3. Responsive Design (MANDATORY):

```html
<!-- Mobile-first approach -->
grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3
```

---

## ğŸ” CONTEXT7 COMPLIANCE CHECK

Before any code suggestion, ALWAYS check:

1. âœ… Does this use Tailwind CSS utility classes?
2. âœ… Does this have transitions/animations?
3. âœ… Does this have dark mode variants?
4. âœ… Does this use forbidden Turkish field names?
5. âœ… Is this Context7 compliant?

---

## ğŸ“š CONTEXT7 RESOURCES

- **Authority:** `.context7/authority.json`
- **Memory:** `.context7/CONTEXT7_MEMORY_SYSTEM.md`
- **Tailwind Guide:** `.context7/TAILWIND-TRANSITION-RULE.md`
- **Form Standards:** `.context7/FORM_DESIGN_STANDARDS.md`
- **Map Standards:** `.context7/HARITA_SISTEMI_STANDARDS.md`

---

## ğŸ¯ CSS FRAMEWORK ENFORCEMENT

**Status:** STRICT - Tailwind CSS is the ONLY CSS framework

**Auto-reject patterns:**

- Any Bootstrap classes
- Any Neo Design System classes
- Custom CSS that duplicates Tailwind

**Required on code review:**

- All styling uses Tailwind utilities
- Transitions present on interactive elements
- Dark mode variants present
- Responsive design (mobile-first)

---

## ğŸ¤– AI ASSISTANT INSTRUCTIONS

When suggesting code:

1. **ALWAYS use Tailwind CSS utility classes**
2. **NEVER suggest Bootstrap, Neo Design, or custom CSS**
3. **ALWAYS include transitions** (`transition-all duration-200`)
4. **ALWAYS include dark mode variants** (`dark:bg-gray-800`)
5. **ALWAYS check Context7 compliance** before suggesting

## ğŸ”— CONTEXT7 DUAL SYSTEM INTEGRATION

**CRITICAL RULE:** When user says "Context7 kullan" or asks about Context7, **BOTH systems** must be activated automatically.

### ğŸ¯ TWO CONTEXT7 SYSTEMS:

1. **Upstash Context7 MCP** (External - Library Documentation)
    - Purpose: General library documentation (Laravel, React, MySQL, etc.)
    - Tools: `resolve-library-id`, `get-library-docs`
    - When to use: Library/framework questions

2. **YalÄ±han BekÃ§i Context7** (Internal - Project Rules)
    - Purpose: Project-specific rules and standards
    - Tools: `get_context7_rules`, `check_pattern`, `get_system_structure`, `validate`
    - When to use: Project compliance, code validation, project structure

### âœ… AUTOMATIC DUAL SYSTEM USAGE:

When user says **"Context7 kullan"** or asks about Context7:

**STEP 1: Upstash Context7 MCP (Library Documentation)**

- Automatically use `resolve-library-id` and `get-library-docs` for library questions
- Get latest API documentation from official sources
- Provide up-to-date code examples

**STEP 2: YalÄ±han BekÃ§i Context7 (Project Rules)**

- Automatically use `get_context7_rules` to get project rules
- Use `check_pattern` to validate code against project patterns
- Use `get_system_structure` to understand project architecture
- Use `validate` to check Context7 compliance

### ğŸ”„ DUAL SYSTEM WORKFLOW:

**Example: User says "Context7 kullan, Laravel migration oluÅŸtur"**

```
1. Upstash Context7 MCP:
   â†’ resolve-library-id("Laravel") â†’ "/laravel/laravel"
   â†’ get-library-docs("/laravel/laravel", topic: "migrations")
   â†’ Get latest Laravel migration documentation

2. YalÄ±han BekÃ§i Context7:
   â†’ get_context7_rules() â†’ Get project rules
   â†’ check_pattern("migration") â†’ Check migration patterns
   â†’ validate(code) â†’ Validate against project standards
   â†’ Ensure code follows project rules (status field, display_order, etc.)
```

### ğŸ“ USAGE EXAMPLES:

**Example 1: User says "Context7 kullan"**

```
User: "Context7 kullan, Laravel migration nasÄ±l oluÅŸturulur?"
â†’ BOTH systems activate:
  1. Upstash Context7 MCP: Get Laravel migration docs
  2. YalÄ±han BekÃ§i Context7: Check project migration standards
  3. Combine: Latest Laravel docs + Project compliance rules
```

**Example 2: Code Generation**

```
User: "Context7 kullan, yeni bir model oluÅŸtur"
â†’ BOTH systems activate:
  1. Upstash Context7 MCP: Get Laravel Eloquent documentation
  2. YalÄ±han BekÃ§i Context7: Validate against project rules
     - Check: status field (NOT enabled)
     - Check: display_order (NOT order)
     - Check: Tailwind CSS (NOT Bootstrap)
```

**Example 3: Project Compliance**

```
User: "Context7 kullan, bu kod uyumlu mu?"
â†’ BOTH systems activate:
  1. YalÄ±han BekÃ§i Context7: validate(code) â†’ Check compliance
  2. YalÄ±han BekÃ§i Context7: check_pattern() â†’ Check patterns
  3. Upstash Context7 MCP: Get library docs if needed
```

### âš¡ AUTO-INVOKE RULES:

- **"Context7 kullan" triggers BOTH systems**: No need to ask which one
- **"Context7 kurallarÄ±na gÃ¶re dÃ¼zenle"** â†’ YalÄ±han BekÃ§i Context7 (doÄŸrulama + dÃ¼zenleme)
- **"Context7'e gÃ¶re yap"** â†’ Her iki sistem aktif (yeni kod Ã¼retimi)
- **Automatic activation**: Both systems work together seamlessly
- **Complementary**: Library docs + Project rules = Perfect code
- **NO USER CONFIRMATION NEEDED**: When user says "Context7", automatically activate systems

### ğŸ” WHEN TO USE DUAL SYSTEM:

âœ… **USE BOTH when:**

- User explicitly says "Context7 kullan"
- User asks about library features AND project compliance
- Code generation needs both library docs and project rules
- User needs validation against project standards

âœ… **USE Upstash Context7 MCP ONLY when:**

- User asks about library/framework features
- User needs code examples from official docs
- User asks "how to" questions about libraries

âœ… **USE YalÄ±han BekÃ§i Context7 ONLY when:**

- User asks about project-specific rules
- User needs code validation
- User asks about project structure
- User needs compliance checking

---

## ğŸ“– REFERENCE

For complete rules, see:

- `.context7/authority.json` (master authority file)
- `.context7/CURSOR_MEMORY_CONTEXT7.md` (Cursor Memory dokÃ¼mantasyonu)
- `.context7/CURSOR_MCP_SETUP.md` (Context7 MCP setup guide)
- `.yalihan-bekci/knowledge/` (learned patterns)
- `.context7/TAILWIND-TRANSITION-RULE.md` (detailed guide)

---

## ğŸŒ API ENDPOINT MANAGEMENT SYSTEM

**CRITICAL RULE:** TÃ¼m API endpoint'ler merkezi sistem Ã¼zerinden yÃ¶netilir. Hardcoded endpoint'ler YASAKTIR.

### âœ… REQUIRED:

1. **Merkezi Endpoint Registry:**
    - Backend: `config/api-endpoints.php` - TÃ¼m endpoint'ler burada tanÄ±mlÄ±
    - Frontend: `public/js/api-config.js` - JavaScript endpoint config
    - Yeni endpoint eklerken MUTLAKA her iki dosyaya da ekle

2. **JavaScript'te Endpoint KullanÄ±mÄ±:**

    ```javascript
    // âœ… DOÄRU (Merkezi config)
    fetch(window.APIConfig.location.districts(48));
    fetch(window.APIConfig.categories.subcategories(parentId));
    fetch(window.APIConfig.admin.generateAiTitle);

    // âŒ YANLIÅ (Hardcoded - YASAK!)
    fetch('/api/location/districts/48');
    fetch(`/api/categories/sub/${parentId}`);
    ```

3. **Backend'de Endpoint KullanÄ±mÄ±:**

    ```php
    // âœ… DOÄRU (Config'den al)
    $endpoint = config('api-endpoints.location.districts');
    $url = str_replace('{id}', $id, $endpoint);

    // âŒ YANLIÅ (Hardcoded - YASAK!)
    $url = "/api/location/districts/{$id}";
    ```

4. **Yeni Endpoint Ekleme SÃ¼reci:**
    -   1. `config/api-endpoints.php`'ye ekle
    -   2. `public/js/api-config.js`'ye ekle
    -   3. Route'u `routes/api.php` veya `routes/api/v1/*.php`'ye ekle
    -   4. `php artisan api:validate-routes` ile kontrol et
    -   5. `php artisan api:test-endpoints` ile test et

### âŒ FORBIDDEN:

- **Hardcoded endpoint'ler** JavaScript veya PHP kodunda
- **DoÄŸrudan URL yazma** (`'/api/...'` formatÄ±nda)
- **String concatenation** ile endpoint oluÅŸturma
- **Config dosyalarÄ±nÄ± gÃ¼ncellemeden** yeni endpoint ekleme

### ğŸ”„ MIGRATION RULE:

**Her yeni kod yazarken veya eski kodu gÃ¼ncellerken:**

1. **Hardcoded endpoint'leri tespit et:**

    ```bash
    grep -r "/api/" public/js/ resources/js/ app/Http/Controllers/
    ```

2. **Merkezi sisteme geÃ§ir:**
    - JavaScript: `window.APIConfig` kullan
    - PHP: `config('api-endpoints.*')` kullan

3. **Test et:**
    ```bash
    php artisan api:validate-routes
    php artisan api:test-endpoints
    ```

### ğŸ“‹ API SYSTEM STRUCTURE:

```
API Sistemi
â”œâ”€â”€ Backend Config: config/api-endpoints.php
â”œâ”€â”€ Frontend Config: public/js/api-config.js
â”œâ”€â”€ Routes: routes/api.php + routes/api/v1/*.php
â”œâ”€â”€ Validator: php artisan api:validate-routes
â”œâ”€â”€ Docs Generator: php artisan api:generate-docs
â””â”€â”€ Health Check: php artisan api:test-endpoints
```

### ğŸ¯ EXAMPLES:

**JavaScript - Location API:**

```javascript
// âœ… DOÄRU
const response = await fetch(window.APIConfig.location.districts(ilId));

// âŒ YANLIÅ
const response = await fetch(`/api/location/districts/${ilId}`);
```

**JavaScript - Categories API:**

```javascript
// âœ… DOÄRU
const url = window.APIConfig.categories.subcategories(parentId);
const response = await fetch(url);

// âŒ YANLIÅ
const url = `/api/categories/sub/${parentId}`;
```

**PHP - Config KullanÄ±mÄ±:**

```php
// âœ… DOÄRU
$endpoint = config('api-endpoints.location.districts');
$url = str_replace('{id}', $ilId, $endpoint);

// âŒ YANLIÅ
$url = "/api/location/districts/{$ilId}";
```

### ğŸ“š DOCUMENTATION:

- **API Endpoint Management:** `docs/API-ENDPOINT-MANAGEMENT.md`
- **API Routes Structure:** `routes/api/README.md`
- **Config Files:** `config/api-endpoints.php`, `public/js/api-config.js`

### âš ï¸ AUTO-CHECK:

Her kod Ã¶nerisinde:

1. âœ… Hardcoded endpoint var mÄ± kontrol et
2. âœ… `window.APIConfig` kullanÄ±lÄ±yor mu kontrol et
3. âœ… Yeni endpoint eklendiyse config dosyalarÄ±na eklendi mi kontrol et
4. âœ… Route validator Ã§alÄ±ÅŸtÄ±rÄ±ldÄ± mÄ± kontrol et

### ğŸ”„ AUTOMATIC MIGRATION RULE:

**CRITICAL:** Her yeni kod yazarken veya mevcut kodu dÃ¼zenlerken:

1. **Hardcoded endpoint tespit et:**
    - Dosyada `'/api/` veya `"/api/` aramasÄ± yap
    - EÄŸer bulunursa, otomatik olarak yeni sisteme geÃ§ir

2. **Migration sÃ¼reci:**

    ```javascript
    // âŒ BULUNAN (Eski sistem)
    fetch('/api/location/districts/48');

    // âœ… OTOMATIK DÃ–NÃœÅTÃœR (Yeni sistem)
    fetch(window.APIConfig.location.districts(48));
    ```

3. **Config kontrolÃ¼:**
    - Endpoint config'de yoksa, Ã¶nce config'e ekle
    - Sonra kodu gÃ¼ncelle

4. **Test:**
    - `php artisan api:validate-routes` Ã§alÄ±ÅŸtÄ±r
    - Kodun Ã§alÄ±ÅŸtÄ±ÄŸÄ±nÄ± doÄŸrula

### ğŸ“‹ MIGRATION CHECKLIST:

Her dosya dÃ¼zenlendiÄŸinde:

- [ ] Hardcoded endpoint var mÄ±? â†’ Varsa geÃ§ir
- [ ] Config dosyalarÄ±nda tanÄ±mlÄ± mÄ±? â†’ Yoksa ekle
- [ ] `window.APIConfig` kullanÄ±lÄ±yor mu? â†’ KullanÄ±lmÄ±yorsa dÃ¼zelt
- [ ] Route validator Ã§alÄ±ÅŸtÄ±rÄ±ldÄ± mÄ±? â†’ Ã‡alÄ±ÅŸtÄ±r

### ğŸ¯ MIGRATION PRIORITY:

**YÃ¼ksek Ã–ncelik (Hemen geÃ§ir):**

- SÄ±k kullanÄ±lan dosyalar
- Yeni eklenen Ã¶zellikler
- Bug fix'lerde kullanÄ±lan endpoint'ler

**Orta Ã–ncelik (SÄ±rayla geÃ§ir):**

- Orta sÄ±klÄ±kta kullanÄ±lan dosyalar
- Refactoring sÄ±rasÄ±nda

**DÃ¼ÅŸÃ¼k Ã–ncelik (Zaman buldukÃ§a):**

- Az kullanÄ±lan dosyalar
- Legacy kodlar

### ğŸ“š MIGRATION DOCUMENTATION:

- **Migration Plan:** `docs/API-MIGRATION-PLAN.md`
- **API Management:** `docs/API-ENDPOINT-MANAGEMENT.md`
- **Tespit Edilen Dosyalar:** 23 dosya (1 tamamlandÄ±, 22 kalan)

---

**Last Updated:** 2025-12-03
**Version:** Context7 v5.5.0
**Enforcement:** STRICT
**Cursor Memory:** âœ… Aktif - Otomatik Ã‡alÄ±ÅŸÄ±yor
**API Management:** âœ… Aktif - Merkezi Sistem
**Auto Migration:** âœ… Aktif - Her iÅŸlemde kontrol ediliyor
